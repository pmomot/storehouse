<sh-header></sh-header>
<div class="main-content">
    <p>
        <button type="button" class="btn btn-primary"
                ng-click="vm.showPopup('create')">Add new product</button>
    </p>
    <div class="table-responsive" ng-if="vm.products().length > 0">
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th>Name</th>
                <th>Desc</th>
                <th class="center">Controls</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="p in vm.products()" data-id="{{ p.uuid }}">
                <td>{{ p.name }}</td>
                <td>{{ p.description }}</td>
                <td class="center">
                    <span class="alert alert-info glyphicon glyphicon-edit"
                          ng-click="vm.showPopup('update', p)"></span>
                    <span class="alert alert-danger glyphicon glyphicon-remove"
                          ng-click="vm.showPopup('remove', p)"></span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div ng-if="vm.products().length === 0">There are no products in storehouse :(</div>

    <sh-modal title="vm.modalTitle" visible="vm.modalShow" ng-if="vm.modalType !== 'remove'"
            footer="vm.modalButtonsOptions" model="vm.modalItem" type="vm.modalType">
        <div class="form-group" ng-class="{ 'has-error' : modalForm.name.$invalid && !modalForm.name.$pristine}">
            <label class="control-label" for="name">Name *</label>
            <input type="text" class="form-control" id="name" name="name"
                   ng-model="vm.modalItem.name" ng-minlength="10">
            <span class="help-block" ng-show="modalForm.name.$error.minlength">Name is empty.</span>
        </div>
        <div class="form-group">
            <label class="control-label" for="description">Description *</label>
            <input type="text" class="form-control" id="description" required
                   ng-model="vm.modalItem.description">
        </div>
        <div class="form-group">
            <label class="control-label" for="arrivedAt">Date Arrived *</label>
            <input type="date" class="form-control" id="arrivedAt" required
                   ng-model="vm.modalItem.arrivedAt">
        </div>
        <div class="form-group">
            <label class="control-label" for="expiresAt">Date Expires *</label>
            <input type="date" class="form-control" id="expiresAt" required
                   ng-model="vm.modalItem.expiresAt">
        </div>
    </sh-modal>
    <sh-modal title="vm.modalTitle" visible="vm.modalShow" ng-if="vm.modalType === 'remove'" size="small"
            footer="vm.modalButtonsOptions" model="vm.modalItem" type="vm.modalType">
        <p>Are you sure you want to remove product: <b>{{ vm.modalItem.name }}</b> ?</p>
    </sh-modal>
</div>